<?xml version="1.0" encoding="UTF-8"?>

<!-- This file is part of the documentation of MathBook XML   -->
<!--                                                          -->
<!--    MathBook XML Author's Guide                           -->
<!--                                                          -->
<!-- Copyright (C) 2013-2016  Robert A. Beezer                -->
<!-- See the file COPYING for copying conditions.             -->

<chapter xml:id="Combinatorics" xmlns:xi="http://www.w3.org/2001/XInclude">
    <title>Counting and Combinatorics</title>

<section>	
	<title>Introduction</title>
<p>Discussion on the usefulness of having ways to count the number
of elements in a set without having to explicitly listing all elements.</p>
<p>Consider counting the number of ways one can arrange Peter, Paul, and Mary with the order important.  Listing the possibilities:
<ul>
	<li>Peter, Paul, Mary</li>
	<li>Peter, Mary, Paul</li>
	<li>Paul, Peter, Mary</li>
	<li>Paul, Mary, Peter</li>
	<li>Mary, Peter, Paul</li>
	<li>Mary, Paul, Peter</li>
</ul>
So, it is easy to see that these are all of the possible outcomes and that the total number of such outcomes is 6. What happens however if we add Simone to the list?
<ul>
	<li>Simone, Peter, Paul, Mary</li>
	<li>Simone, Peter, Mary, Paul</li>
	<li>Simone, Paul, Peter, Mary</li>
	<li>Simone, Paul, Mary, Peter</li>
	<li>Simone, Mary, Peter, Paul</li>
	<li>Simone, Mary, Paul, Peter</li>

	<li>Peter, Simone, Paul, Mary</li>
	<li>Peter, Simone, Mary, Paul</li>
	<li>Paul, Simone, Peter, Mary</li>
	<li>Paul, Simone, Mary, Peter</li>
	<li>Mary, Simone, Peter, Paul</li>
	<li>Mary, Simone, Paul, Peter</li>

	<li>Peter, Paul, Simone, Mary</li>
	<li>Peter, Mary, Simone, Paul</li>
	<li>Paul, Peter, Simone, Mary</li>
	<li>Paul, Mary, Simone, Peter</li>
	<li>Mary, Peter, Simone, Paul</li>
	<li>Mary, Paul, Simone, Peter</li>

	<li>Peter, Paul, Mary, Simone</li>
	<li>Peter, Mary, Paul, Simone</li>
	<li>Paul, Peter, Mary, Simone</li>
	<li>Paul, Mary, Peter, Simone</li>
	<li>Mary, Peter, Paul, Simone</li>
	<li>Mary, Paul, Peter, Simone</li>
</ul>
Notice how the list quickly grows when just adding one more choice. This illustrates how keeping track of the number of items in a set can quickly get impossible to keep up with and to count unless we can approach this problem using a more mathematical approach.
</p>
	<definition>
	<title>Cardinality</title>
		<statement>Given a set of elements A, the number of elements in the 
		set is known as the sets cardinality and is denoted |A|. If the set has 
		an infinite number of elements then we set |A| = <m>\infty</m>.
		</statement>
	</definition>
	
	<p>In order to "count without counting" we establish the following 
	foundational principle.</p>
	
	<theorem>
		<title>Multiplication Principle</title>
		<statement>Given two successive events A and B, the number of ways 
		to perform A and then B is |A||B|.
		</statement>
		<proof>
			<p>If either of the events has infinite cardinality, then it is 
			clear
			that the number of ways to perform A and then B will also be 
			infinite. So, assume that both |A| and |B| are finite.
			In order to count the successive events, enumerate the elements in
			each set
			<md>
				<mrow>A = \left \{ a_1, a_2, a_3, ... , a_{|A|} \right \}</mrow> 	
				and
				<mrow>B = \left \{  b_1, b_2, b_3, ... , b_{|B|} \right \}</mrow>
			</md>
			and consider the function f(k,j) = (k-1)|B| + j. This function is 
			one-to-one and onto from the set 
			<md>
				<mrow>\left \{ (k,j): 1 \le k \le |A|, 1 \le j \le |B| \right \} </mrow>
			</md> 
			onto 
			<md>
				<mrow>\left \{ s : 1 \le s \le |A| |B| \right \}.</mrow>
			</md> 
			Since this
			second set has |A| |B| elements then the conclusion follows. 
			coordinates.</p>
		</proof>
	</theorem>

	<definition>
	<title>Factorial</title>
		<statement>
		<p>For any natural number n, 
		<md>
			<mrow>n! = n(n-1)(n-2) ... 3 \cdot 2 \cdot 1</mrow>
		</md>
		</p>
		</statement>
	</definition>
	
	<example>
		<title>iPad security code</title>
		<p>Consider your ipad's security. To unlock the screen you need to enter your four digit pass code. How easy is it to guess this pass code?</p>
		<p>Using the standard 10 digit keypad, we first have two questions to consider?
		<ol>
			<li>Does the order in which the digits are entered matter?</li>
			<li>Can you reuse a digit more than once?</li>
		</ol>
		For the ipad, the order does matter and you cannot reuse digits. In this case, the number of possible codes can be determined by considering each digit as a separate event with four such events in succession providing the right code. By successively applying the multiplication principle, you find that the number of possible codes is the number of remaining available digits at each step.  Namely, <m>10 \times 9 \times 8 \times 7 = 5040.</m>
		</p>
		<p>
		Note that if you were allowed to reuse the digits then the number of possible outcomes would be more since all 10 digits would be available for each event.  Namely, <m>10 \times 10 \times 10 \times 10 = 10000.</m>
		</p>
	</example>
	
	<example>
		<title>iPad security code with greasy fingers</title>
		<p>Reconsider your ipad's security. In this case, you like to eat
		chocolate bars and have greasy fingers. When you type in your passcode
		your fingers leave a residue over the four numbers pressed. If someone
		now tries to guess your passcode, how many possible attempts are necessary?</p>
		<p>Since there are only four numbers to pick from with order important, the number of possible passcodes remaining is <m>4 \times 3 \times 2 \times 1 = 24</m></p>
	</example>
	
	<example>
		<title>National Treasure</title>
		<p>In the 2004 movie "National Treasure" Ben and Riley are attempting 
		to guess Abagail's password to enter the room with the Declaration. 
		They are able
		to determine the passphrase to get into the vault room by doing a scan
		that detects the buttons pushed (not due to chocolate but just due to 
		the natural oils on fingers). They notice that the buttons pushed 
		include the characters AEFGLORVY.</p>
		<p>Assuming these characters are used only once each, how many possible
		passphrases are possible?</p>
		<p>
		In this case, the order of the characters matters but all of the 
		characters are distinct. Since we have 9 characters provided, the we can
		consider each character as an event with the first event as a choice
		from the 9, the second event as a choice from the remaining 8, etc. This
		gives <m>9 \times 8 \ times ... \times 1 = 362880</m> possible 
		passphrases.
		</p>
		<p>Assuming that some of the characters could be used more than once, 
		how many passphrases need to be considered if the total length
		of passphrase can be at most 12 characters?</p>
		<p>Notice, in this case you don't know which characters might be reused and so the number of possible outcomes will be much larger. What is the answer?</p>
		<p>You can break this problem down into distinct cases:
		<ul>
			<li>Using 9 characters
			<p>This is the answer computed above.</p></li>
			<li>Using 10 characters
			<p>In this case, 1 character can be used twice. To determine the number of possibilities, let's first pick which character can be doubled. There are 9 options for picking that character.  Next, if we consider the two instances of that letter as distinct values then we can just count the number of ways to arrange unique 10 characters which is 10! However, swapping the two characters (which are actually identical) would not give a new passphrase. Since these are counted twice, let's divide these out to give 10!/2.</p></li>
			<li>Using 11 characters
				<p>In this situation we have two unique options:
				<ul>
					<li>One character is used three times and the others just once.
					<p>Continuing as in the previous case, 11!/3!.</p>
					<li>Two characters are used twice and the others just once.</li>
					</li>
				</ul>
				</p>
			</li>
			<li>Using 12 characters</li>
			<ol>
			
				<li>One letter from the nine is used four times and all the others are used once.</li>
				<li>One letter is used three times, another letter is used two times, and the others are used once.</li>
				<li>Three letters are used twice and the others are used once.</li>
			</ol>
		</ul>
			</p>
		<p>With this large collection of possible outcomes, how are the movie
		characters able to determine the correct "VALLEYFORGE" passphrase?</p>
	</example>
	
</section>

<section>
<title>Permutations</title>
<p>When counting various outcomes the order of things sometimes matters. When the order of a set of elements changes we call the second a permutation (or an arrangement) of the first.</p>
	<theorem>
	<title>Permutations of n objects</title>
	<statement>The number of ways to arrange n distinct items is n!</statement>
		<proof>
			<p>Notice that if n=1, then there is only 1 item to arrange and 
			that there is only one possible arrangment.</p>
			<p>
			By induction, assume that any set with n elements has n! arrangments 
			and assume that 
			<md>
			<mrow>|A| = \left \{ a_1, a_2, ... , a_n, a_{n+1} \right \}.</mrow>
			</md>
			Notice that there are n+1 ways to choose 1 element from A and that in doing so leaves a set with n elements. Combining the induction hypothesis with the multiplication principle this gives (n+1)n! = (n+1)! possible outcomes.
			</p>
		</proof>
	</theorem>

	<theorem>
	<title>Permutations of n objects selecting r</title>
		<statement>
			<p>
			The number of ways to arrange r items from a set of n distinct items 
			is <m> P_r^n = \frac{n!}{(n-r)!} </m>
			</p>
		</statement>
		<proof>
			<p>
			Apply the multiplication principle r times noting that there are 
			n choices for the first selection, n-1 choices for the second
			selection, and with n-r+1 choices for the rth selection. This gives
			<md>
				<mrow>P_r^n &amp; = n(n-1) ... (n-r+1)</mrow>
				<mrow>&amp; = n(n-1) ... (n-r+1)\frac{(n-r)!}{(n-r)!}</mrow>
				<mrow>&amp; = \frac{n(n-1) ... (n-r+1)(n-r)!}{(n-r)!}</mrow>
				<mrow>&amp; = \frac{n!}{(n-r)!}</mrow>
			</md>
			</p>
		</proof>
	</theorem>
	
	<theorem>
	<title>Permutations when Not all items are distinguishable and without replacement: (Multinomial Coefficients)</title>
	<statement>
If n items belong to s categories, n1 in first, n2 in second, ... , ns in the last, the number of ways to pick all is
!	
	</statement>
	</theorem>
	
</section>

<section>
<title>Combinations</title>
<p>When counting various outcomes sometimes the order of things does not matter.
In this case we count each different set of outcomes a combination. </p>
	<theorem>
	<title>Combinations of n distinct objects selecting r without replacement</title>
		<statement>
			<p>
			The number of ways to arrange r items from a set of n distinct items 
			is <m> C_r^n = \frac{n!}{r!(n-r)!} </m>
			</p>
		</statement>
		<proof>
			<p>
			Consider creating a permutation of r objects from a set of size n
			by first picking an unordered subset of size r and then counting 
			the number of ways to order that subset. Using our notation and the
			multiplication principle,
			<md>
				<mrow>P_r^n = C_r^n \cdot r!</mrow>
			</md>
			Solving give the result.
			</p>
		</proof>
	</theorem>

	<theorem>
	<title>Combinations of n distinct objects selecting r with replacement</title>
		<statement>
			<p>
			The number of ways to arrange r items from a set of n distinct items 
			is <m> C_r^{n+r-1} = \frac{n+r-1!}{r!(n-1)!} </m>
			</p>
		</statement>
		<proof>
			<p>
			blah
			</p>
		</proof>
	</theorem>

	<example>
		<p>Revisiting your ipad's security, what happens if the order in which the digits are entered does not matter? If so, then you would be picking a combination of 4 digits without replacement from a group of 10 digits. Namely, 
		<md>
			<mrow>\frac{10!}{4!6!} &amp; = \frac{10 \times 9 \times 8 \times 7 \times 6!}{4 \times 3 \times 2 \times 1 \times 6!}</mrow>
			<mrow>&amp; = \frac{10 \times 9 \times 8 \times 7}{4 \times 3 \times 2 \times 1}</mrow>
			<mrow>&amp; = \frac{5040}{24}</mrow>
			<mrow>&amp; = 210.</mrow>
		</md>
		Notice that the total number of options is much smaller when order does not matter.
		</p>
		<p>
		Note that if you were allowed to reuse the digits then the number of possible outcomes would be
		<md>
			<mrow>\frac{13!}{3!10!} &amp; = \frac{13 \times 12 \times 11}{3 \times 2 \times 1} </mrow>
			<mrow> &amp; = 286</mrow>
		</md>
		which once again is more since numbers are allowed to repeat.
		</p>
	</example>
		
	<definition>
	<title>Binomial Coefficients</title>
		<statement>
		<p>
		The value <m>C_r^n</m> is known as the binomial coefficient. It is
		denoted by <m>{n \choose r}</m> and is read "n choose k".
		</p>
		</statement>
	</definition>
	

	<theorem>
	<title>Combinations when distinguishable and with replacement</title>
	<statement>
	= Number of ways to get unordered samples of size r from n objects. 
	</statement>
	</theorem>
	
	<p>Lots of interesting facts about the binomial coefficients.</p>


</section>

<section><title>Exercises</title>
<p>Complete the online homework "Counting".</p>
<p>Completely determine the number of possible passphrases for the National Treasure example started above. Present your answer in a report form.</p>
</section>

</chapter>